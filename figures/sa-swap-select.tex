\begin{tikzpicture}[thick, scale=0.7]
	
	\input{figures/sa-swap.tex}
	
	\clip (0*\chipspacingx - 1,
	       1*\chipspacingx - 1)
	      rectangle
	      (3*\chipspacingx-\chipgap + 1,
	       2*\chipspacingy-\chipgap + 1);
	
	% Other chips
	\begin{scope}[help lines]
		\foreach \x/\y in {0/0,1/0,2/0,1/1,0/2,1/2,2/2,-1/0,-1/1,-1/2,3/0,3/1,3/2}{
			\begin{scope}[shift={(\x*\chipspacingx, \y*\chipspacingy)}]
				\chip
				\randomcores
			\end{scope}
		}
	\end{scope}
	
	% Source chip
	\begin{scope}[shift={(0*\chipspacingx, 1*\chipspacingy)}]
		\begin{scope}[help lines]
			\chip
			\core{0}{1}{1}{}
			\core{1}{1}{1}{}
			\core{2}{1}{1}{}
			\core{3}{1}{1}{}
		\end{scope}
		\begin{scope}[ultra thick]
			\core{4}{2}{2}{$v_a$}
		\end{scope}
	\end{scope}
	
	% Sink chip
	\begin{scope}[shift={(2*\chipspacingx, 1*\chipspacingy)}]
		\begin{scope}[ultra thick]
			\chip
		\end{scope}
		\begin{scope}[help lines]
			\core{0}{1}{1}{}
			\core{1}{1}{1}{}
			\core{2}{1}{1}{}
			\core{3}{1}{1}{}
			\core{4}{1}{1}{}
			\core{5}{1}{1}{}
			\core{6}{1}{1}{}
		\end{scope}
	\end{scope}
	
\end{tikzpicture}

