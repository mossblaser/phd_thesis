\documentclass[12pt,twoside]{report}

\newcommand{\thesistitle}{Building and operating large-scale SpiNNaker machines}
\newcommand{\thesisauthor}{Jonathan Heathcote}
\newcommand{\thesisyear}{2016}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Set up document options
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Set up all packages
\input{thesis-env}

% 1.5 linespacing (as required by university)
\renewcommand{\baselinestretch}{1.5}

% Used in place of \chapter for preface sections. Prevents numbering but
% includes the chapter in the ToC
\newcommand{\prefacesection}[1]{
	\chapter*{#1}
	\addcontentsline{toc}{chapter}{#1}
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Show version/draft status in header
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% The background package is used to add things to the header
\usepackage{background}

% Package defines extra nodes relative to the page to allow nice positioning of
% the notice.
\usepackage{tikzpagenodes}

% Get commit information
\makeatletter
\immediate\write18{git show -s --format="\@percentchar h" > thesis.hash}
\immediate\write18{git show -s --format="\@percentchar aD" | cut -f 1 -d + > thesis.date}
\immediate\write18{./git_change_summary.sh > thesis.gitchanges}
\makeatother

% Display at the bottom of the page (comment out to disable)
\backgroundsetup{pages=all,
                 angle=0, scale=1,
                 color=black, opacity=1, contents={
	\begin{tikzpicture}[overlay,remember picture,help lines]
		% Main commit/version
		\node (commit notice)
		      [ font=\footnotesize
		      , inner sep=4pt
		      , above=of current page text area.south |- current page.south
		      ]
		      {Draft.
		       Revision \texttt{\input{thesis.hash}\unskip}
		       committed on \input{thesis.date}\unskip.};
		% Box around commit message
		\draw [rounded corners, white!90!black]
		      (commit notice.south west)
		      rectangle
		      (commit notice.north east);
		% List changed files (if any)
		\node [ above=10pt of commit notice
		      , text width=\linewidth
		      , font=\tiny
		      , align=center
		      ]
		      {\input{thesis.gitchanges}};
	\end{tikzpicture}
}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Document body
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
	
	% The title page
	\input{titlepage}
	
	% The table of contents which, per university regulations, is followed by a
	% total wordcount.
	\tableofcontents
	\vfill
	\noindent This thesis contains
		\immediate\write18{texcount -1 -sum -inc thesis.tex > thesis.wordcount}%
		\input{thesis.wordcount}words.
	
	\clearpage
	\listoffigures
	
	\clearpage
	\listoftables
	
	% Abstract
	\input{abstract}
	
	% Declaration of non-submission elsewhere
	\input{declaration}
	
	% University-prescribed copyright statement...
	\input{copyright}
	
	% Acknowledgements
	\input{acknowledgements}
	
	% Main body
	\input{introduction.tex}
	\input{background.tex}
	\input{building.tex}
	\input{shortestPaths.tex}
	\input{routing.tex}
	\input{placement.tex}
	\input{discussion.tex}
	\input{future.tex}
	\input{conclusions.tex}
	
	\appendix
	\input{minimalHexCoordinates.tex}
	
	% Bibliography
	\bibliography{references}
	\bibliographystyle{alpha}
	
\end{document}
